{"version":3,"sources":["webpack:///./src/$_lazy_route_resource lazy namespace object","webpack:///./src/app/app.component.html","webpack:///./src/app/app.component.styl","webpack:///./src/app/app.component.ts","webpack:///./src/app/app.module.ts","webpack:///./src/app/base-component.ts","webpack:///./src/app/home/home.component.html","webpack:///./src/app/home/home.component.styl","webpack:///./src/app/home/home.component.ts","webpack:///./src/app/oauth/oauth.component.html","webpack:///./src/app/oauth/oauth.component.styl","webpack:///./src/app/oauth/oauth.component.ts","webpack:///./src/app/user-info/user-info.component.html","webpack:///./src/app/user-info/user-info.component.styl","webpack:///./src/app/user-info/user-info.component.ts","webpack:///./src/app/vk/auth..servise.ts","webpack:///./src/app/vk/baze-service.ts","webpack:///./src/app/vk/errors.service.ts","webpack:///./src/app/vk/freds.service.ts","webpack:///./src/app/vk/user.service.ts","webpack:///./src/app/vk/user.ts","webpack:///./src/app/vk/vk.module.ts","webpack:///./src/environments/environment.ts","webpack:///./src/main.ts"],"names":[],"mappings":"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","file":"main.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./src/$$_lazy_route_resource lazy recursive\";","module.exports = \"<app-user-info\\n  [user]=\\\"user | async\\\"\\n  [isAuth]=\\\"isAuth | async\\\"\\n  (loginClick)=\\\"login()\\\"\\n  (logoutClick)=\\\"logout()\\\"\\n></app-user-info>\\n\\n<ng-container *ngIf=\\\"!(isAuth | async)\\\">\\n  <div class=\\\"not-auth-block\\\"  *ngIf=\\\"!(isAuth | async)\\\">\\n    <h3>Вы не навторизованы. для авторизации назмите кнопку войти.</h3>\\n  </div>\\n</ng-container>\\n\\n<router-outlet></router-outlet>\\n\"","module.exports = \".not-auth-block {\\n  text-align: center;\\n  font-weight: bold;\\n  margin: 50px 20px;\\n}\\n/*# sourceMappingURL=src/app/app.component.css.map */\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvc3JjL2FwcC9hcHAuY29tcG9uZW50LnN0eWwiLCJzcmMvYXBwL2FwcC5jb21wb25lbnQuc3R5bCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLG1CQUFBO0VBQ0Esa0JBQUE7RUFDQSxrQkFBQTtDQ0NEO0FBQ0QscURBQXFEIiwiZmlsZSI6InNyYy9hcHAvYXBwLmNvbXBvbmVudC5zdHlsIiwic291cmNlc0NvbnRlbnQiOlsiLm5vdC1hdXRoLWJsb2NrIHtcclxuICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbiAgZm9udC13ZWlnaHQ6IGJvbGQ7XHJcbiAgbWFyZ2luOiA1MHB4IDIwcHg7XHJcbn1cclxuIiwiLm5vdC1hdXRoLWJsb2NrIHtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xuICBmb250LXdlaWdodDogYm9sZDtcbiAgbWFyZ2luOiA1MHB4IDIwcHg7XG59XG4vKiMgc291cmNlTWFwcGluZ1VSTD1zcmMvYXBwL2FwcC5jb21wb25lbnQuY3NzLm1hcCAqLyJdfQ== */\"","import { Component, OnInit } from '@angular/core';\nimport { Observable, of } from 'rxjs';\nimport { catchError, map, switchAll, share, mergeMap, delay, distinct } from 'rxjs/operators';\nimport { BaseComponent } from './base-component';\nimport { User } from './vk/user';\nimport { AuthSetvice, AuthState } from './vk/auth..servise';\nimport { UserService } from './vk/user.service';\nimport { ErrorsService } from './vk/errors.service';\nimport { ApiError } from './vk/api-error';\nimport {MatSnackBar} from '@angular/material/snack-bar';\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.styl']\n})\nexport class AppComponent extends BaseComponent implements OnInit {\n  user: Observable<User> = of(null);\n  isAuth: Observable<boolean> = of(false);\n\n  constructor(\n    auth: AuthSetvice,\n    private _userService: UserService,\n    private _errorsService: ErrorsService,\n    private _snackBar: MatSnackBar\n  ) {\n    super(auth);\n  }\n\n  ngOnInit() {\n    console.info(window.location.origin);\n\n    this.isAuth = this.authStateChange$.pipe(\n      map((authState: AuthState) => authState.state),\n      delay(0),\n    );\n\n    this.user = this.authStateChange$.pipe(\n      map((authState: AuthState) => {\n        if (authState.state) {\n          return this._userService.get(authState.userID).pipe(\n            catchError((error) => {\n              return of(null);\n            })\n          );\n        } else {\n          return of(null);\n        }\n      }),\n      share(),\n      switchAll()\n    );\n\n    this._errorsService.error$.pipe(\n      map((error: ApiError) => error.error_msg),\n      distinct()\n    )\n    .subscribe(\n      (error: string) => {\n        this._snackBar.open(\n          error,\n          'Ошибка',\n          { duration: 2000 }\n        );\n      }\n    );\n  }\n\n  login() {\n    this._auth.login();\n  }\n\n  logout() {\n    this._auth.logout();\n  }\n}\n","import { BrowserModule } from '@angular/platform-browser';\nimport { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport {\n  HttpClientModule,\n  HttpClientJsonpModule,\n} from '@angular/common/http';\n\nimport {BrowserAnimationsModule} from '@angular/platform-browser/animations';\nimport {\n  MatToolbarModule,\n  MatListModule,\n  MatSnackBarModule,\n  MatButtonModule\n} from '@angular/material';\nimport { environment } from '../environments/environment';\n\nimport { VkModule } from './vk/vk.module';\nimport { AppComponent } from './app.component';\nimport { HomeComponent } from './home/home.component';\nimport { OAuthComponent } from './oauth/oauth.component';\nimport { UserInfoComponent } from './user-info/user-info.component';\n\nimport { ERROR_MESSAGES_CONFIG } from './vk/vk.module';\nimport { ApiError } from './vk/api-error';\n\nconst appRoutes: Routes = [\n  { path: 'oauth', component: OAuthComponent},\n  { path: '', component: HomeComponent}\n];\n\nconst errorMesageConf: Array<ApiError> = [\n  {\n    error_code: 5,\n    error_msg: 'Токен устарел. поробуйте выдти и войти снова'\n  }\n];\n\n@NgModule({\n  declarations: [\n    AppComponent,\n    HomeComponent,\n    OAuthComponent,\n    UserInfoComponent\n  ],\n  imports: [\n    BrowserModule,\n    BrowserAnimationsModule,\n    HttpClientModule,\n    HttpClientJsonpModule,\n    RouterModule.forRoot(appRoutes),\n    MatToolbarModule,\n    MatListModule,\n    MatSnackBarModule,\n    MatButtonModule,\n    VkModule.forRoot(\n      {\n        appID: environment.appID,\n        serviceToken: environment.serviceToken,\n        display: environment.display,\n        response_type: environment.response_type,\n        scope: environment.scope,\n        state: environment.state,\n        apiVersion: environment.apiVersion\n      },\n      environment.vkTokenKeyInStore,\n      window.sessionStorage\n    )\n  ],\n  providers: [\n    { provide: ERROR_MESSAGES_CONFIG, useValue: errorMesageConf, multi: true },\n  ],\n  bootstrap: [AppComponent]\n})\nexport class AppModule { }\n","import {Inject} from '@angular/core';\r\nimport { AuthSetvice, AuthState } from './vk/auth..servise';\r\nimport { BehaviorSubject } from 'rxjs';\r\nimport { Observable } from 'rxjs';\r\nimport { map, delay, share } from 'rxjs/operators';\r\n\r\nexport abstract class BaseComponent {\r\n  constructor (@Inject(AuthSetvice) protected _auth: AuthSetvice) {}\r\n\r\n  protected get authStateChange$(): BehaviorSubject<AuthState> {\r\n    return this._auth.authStateChange$;\r\n  }\r\n\r\n  // protected get isAuth(): Observable<boolean> {\r\n  //   return this._auth.authStateChange$.pipe(\r\n  //     map((authState: AuthState) => authState.state),\r\n  //     share(),\r\n  //     delay(0),\r\n  //   );\r\n  // }\r\n}\r\n","module.exports = \"<mat-list>\\n  <mat-list-item *ngFor=\\\"let friend of friends | async\\\">\\n    <img matListAvatar src=\\\"{{ friend.photo }}\\\">\\n    <h3 matLine> {{ friend.firstName }} {{ friend.lastName }} </h3>\\n  </mat-list-item>\\n</mat-list>\\n\\n\"","module.exports = \"/*# sourceMappingURL=src/app/home/home.component.css.map */\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvaG9tZS9ob21lLmNvbXBvbmVudC5zdHlsIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLDJEQUEyRCIsImZpbGUiOiJzcmMvYXBwL2hvbWUvaG9tZS5jb21wb25lbnQuc3R5bCJ9 */\"","import { Component, OnInit } from '@angular/core';\nimport { Observable, of } from 'rxjs';\nimport { catchError, map, switchAll, share } from 'rxjs/operators';\n\nimport { BaseComponent } from '../base-component';\nimport { User } from '../vk/user';\nimport { AuthSetvice, AuthState } from '../vk/auth..servise';\nimport { FredsService } from '../vk/freds.service';\n\n@Component({\n  selector: 'app-home',\n  templateUrl: './home.component.html',\n  styleUrls: ['./home.component.styl']\n})\nexport class HomeComponent extends BaseComponent implements OnInit {\n  friends: Observable<Array<User>> = of([]);\n\n  constructor(auth: AuthSetvice, private _frendService: FredsService) {\n    super(auth);\n  }\n\n  ngOnInit() {\n    this.friends = this.authStateChange$.pipe(\n      map((authState: AuthState) => {\n        if (authState.state) {\n          return this._frendService.get(authState.userID).pipe(\n            catchError((error) => {\n              return of([]);\n            })\n          );\n        } else {\n          return of(null);\n        }\n      }),\n      share(),\n      switchAll(),\n    );\n  }\n}\n","module.exports = \"<p>\\n  oauth works!\\n</p>\\n\"","module.exports = \"/*# sourceMappingURL=src/app/oauth/oauth.component.css.map */\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvb2F1dGgvb2F1dGguY29tcG9uZW50LnN0eWwiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsNkRBQTZEIiwiZmlsZSI6InNyYy9hcHAvb2F1dGgvb2F1dGguY29tcG9uZW50LnN0eWwifQ== */\"","import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\n\nimport { AuthSetvice } from '../vk/auth..servise';\n\n// http://localhost:4200/test#access_token=deaa55218461de0caf1fcb982aa86a173152e4e4ed1e33455daeda4c6d9ff332c3ff087b8141618b35f3c&expires_in=86400&user_id=54495905&state=123456\n@Component({\n  selector: 'app-oauth',\n  templateUrl: './oauth.component.html',\n  styleUrls: ['./oauth.component.styl']\n})\nexport class OAuthComponent implements OnInit {\n\n  constructor(\n    private _route: ActivatedRoute,\n    private _router: Router,\n    private _auth: AuthSetvice\n  ) { }\n\n  ngOnInit() {\n    this._route.fragment.subscribe((fragment: string) => {\n      const token = Object.assign(\n        {},\n        ...fragment\n          .split('&')\n          .map(\n            (param: string) => {\n              const [key, value] = param.split('=');\n              return {[key]: value};\n            }\n          )\n      );\n\n      this._auth.setToken(token);\n      this._router.navigate(['']);\n    });\n  }\n\n}\n","module.exports = \"<mat-toolbar>\\n  <ng-container *ngIf=\\\"user\\\">\\n    {{ user.firstName }} {{ user.lastName }}\\n  </ng-container>\\n  <span class=\\\"spacer\\\"></span>\\n  <button mat-raised-button (click)=\\\"login()\\\" *ngIf=\\\"!isAuth\\\">\\n    Вход\\n  </button>\\n  <button mat-raised-button (click)=\\\"logout()\\\" *ngIf=\\\"isAuth\\\">\\n    Выход\\n  </button>\\n</mat-toolbar>\\n\"","module.exports = \".spacer {\\n  -webkit-box-flex: 1;\\n          flex: 1 1 auto;\\n}\\n/*# sourceMappingURL=src/app/user-info/user-info.component.css.map */\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvdXNlci1pbmZvL3NyYy9hcHAvdXNlci1pbmZvL3VzZXItaW5mby5jb21wb25lbnQuc3R5bCIsInNyYy9hcHAvdXNlci1pbmZvL3VzZXItaW5mby5jb21wb25lbnQuc3R5bCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLG9CQUFBO1VBQUEsZUFBQTtDQ0NEO0FBQ0QscUVBQXFFIiwiZmlsZSI6InNyYy9hcHAvdXNlci1pbmZvL3VzZXItaW5mby5jb21wb25lbnQuc3R5bCIsInNvdXJjZXNDb250ZW50IjpbIi5zcGFjZXIge1xyXG4gIGZsZXg6IDEgMSBhdXRvO1xyXG59XHJcbiIsIi5zcGFjZXIge1xuICBmbGV4OiAxIDEgYXV0bztcbn1cbi8qIyBzb3VyY2VNYXBwaW5nVVJMPXNyYy9hcHAvdXNlci1pbmZvL3VzZXItaW5mby5jb21wb25lbnQuY3NzLm1hcCAqLyJdfQ== */\"","import {\n  Component,\n  EventEmitter,\n  Input,\n  Output\n} from '@angular/core';\n\nimport { User } from '../vk/user';\n\n@Component({\n  selector: 'app-user-info',\n  templateUrl: './user-info.component.html',\n  styleUrls: ['./user-info.component.styl']\n})\nexport class UserInfoComponent {\n  @Input()\n  user: User;\n\n  @Input()\n  isAuth = false;\n\n  @Output()\n  loginClick = new EventEmitter();\n\n  @Output()\n  logoutClick = new EventEmitter();\n\n  login() {\n    this.loginClick.next();\n  }\n\n  logout() {\n    this.logoutClick.next();\n  }\n}\n","import { Injectable } from '@angular/core';\r\nimport { HttpClient, HttpParams } from '@angular/common/http';\r\n\r\nimport { BehaviorSubject, Observable, throwError, of } from 'rxjs';\r\nimport { map, switchMap, catchError } from 'rxjs/operators';\r\n\r\nimport { VkApiConfig } from './vk-api-config';\r\nimport { VKAccessToken } from './token';\r\nimport { TokenStore } from './token-store.interface';\r\nimport { ErrorsService } from './errors.service';\r\n\r\nexport interface AuthState {\r\n  state: boolean;\r\n  userID?: number;\r\n}\r\n\r\ninterface TokenInfo {\r\n  success: 1|0;\r\n  user_id: number;\r\n  date: number;\r\n  expire: number;\r\n}\r\n\r\n@Injectable()\r\nexport class AuthSetvice {\r\n  private _logining = false;\r\n  private _http: HttpClient;\r\n  private _token: VKAccessToken;\r\n  private _store: TokenStore;\r\n  private _tokenKeyInStore: string;\r\n  private _config: VkApiConfig;\r\n  private _errors: ErrorsService;\r\n\r\n  readonly authStateChange$ = new BehaviorSubject<AuthState>({state: false});\r\n\r\n  constructor(\r\n    httpClient: HttpClient,\r\n    store: TokenStore,\r\n    tokenKeyInStore: string,\r\n    config: VkApiConfig,\r\n    errors: ErrorsService\r\n  ) {\r\n    this._http = httpClient;\r\n    this._store = store;\r\n    this._tokenKeyInStore = tokenKeyInStore;\r\n    this._config = config;\r\n    this._errors = errors;\r\n  }\r\n\r\n  get token(): string {\r\n    return this._token && this._token.access_token || '';\r\n  }\r\n\r\n  get userID(): number {\r\n    return this._token && this._token.user_id || 0;\r\n  }\r\n\r\n  get logining(): boolean {\r\n    return this._logining;\r\n  }\r\n\r\n  isAuth(): boolean {\r\n    // && !this.isTokenExpiried()\r\n    return Boolean(this._token\r\n      && this._token.access_token\r\n    );\r\n  }\r\n\r\n  isTokenExpiried(): boolean {\r\n    if (\r\n      this._token\r\n      && this._token.expires_in\r\n      && this._token.expires_in < (this.getCuentTimestamp() - 10)\r\n    ) {\r\n      return true;\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  setToken(token: VKAccessToken) {\r\n    // this._token = token;\r\n    // this.saveToken();\r\n    this.checkToken(token.access_token).subscribe(\r\n      (tokenInfo) => {\r\n        this._token = token;\r\n        this._token.expires_in = tokenInfo.expire;\r\n        this.saveToken();\r\n      },\r\n      (error) => {}\r\n    );\r\n  }\r\n\r\n  resetToken() {\r\n    this._token = undefined;\r\n    this.removeTokenFromStore(this._tokenKeyInStore);\r\n  }\r\n\r\n  saveToken() {\r\n    this.saveTokenToStore(this._tokenKeyInStore);\r\n  }\r\n\r\n  loadToken() {\r\n    this.loadTokenFromStore(this._tokenKeyInStore);\r\n  }\r\n\r\n  login() {\r\n    this._logining = true;\r\n\r\n    const config = {\r\n      client_id: this._config.appID,\r\n      display: this._config.display,\r\n      // redirect_uri: 'http://localhost:4200/test',\r\n      redirect_uri: `${window.location.origin}/oauth`,\r\n      scope: this._config.scope.join(','),\r\n      response_type: this._config.response_type,\r\n      v: this._config.apiVersion,\r\n      state: this._config.state\r\n    };\r\n\r\n    document.location.replace([\r\n      'https://oauth.vk.com/authorize',\r\n      Object.entries(config)\r\n      .map((item) => item.join('='))\r\n      .join('&')\r\n    ].join('?'));\r\n  }\r\n\r\n  logout() {\r\n    this.resetToken();\r\n  }\r\n\r\n  private saveTokenToStore(key: string) {\r\n    this._store.setItem(key, JSON.stringify(this._token));\r\n\r\n    if (this.isAuth()) {\r\n      this.authStateChange$.next({\r\n        state: true,\r\n        userID: this.userID\r\n      });\r\n    }\r\n  }\r\n\r\n  private loadTokenFromStore(key: string) {\r\n    this._token = JSON.parse(this._store.getItem(key)) as VKAccessToken;\r\n\r\n    if (this.isAuth()) {\r\n      this.authStateChange$.next({\r\n        state: true,\r\n        userID: this.userID\r\n      });\r\n    }\r\n  }\r\n\r\n  private removeTokenFromStore(key: string) {\r\n    this._store.removeItem(key);\r\n    this.authStateChange$.next({state: false});\r\n  }\r\n\r\n  private getCuentTimestamp(): number {\r\n    return new Date().getTime();\r\n  }\r\n\r\n  private checkToken(token: string): Observable<TokenInfo> {\r\n    const params = new HttpParams()\r\n      .set('token', token)\r\n      .set('access_token', this._config.serviceToken)\r\n      .set('v', this._config.apiVersion)\r\n    ;\r\n\r\n    const url = 'https://api.vk.com/method/secure.checkToken';\r\n\r\n    return this._http.jsonp(\r\n      `${url}?${params.toString()}`,\r\n      'callback'\r\n    ).pipe(\r\n      switchMap((response: object) => {\r\n        if ('error' in response) {\r\n          return throwError(response['error']);\r\n        }\r\n\r\n        return of(response);\r\n      }),\r\n      catchError((error) => {\r\n        this._errors.flashError(error);\r\n        return throwError(error);\r\n      }),\r\n      map((value: any): TokenInfo => value.response)\r\n    );\r\n  }\r\n}\r\n","import { Inject } from '@angular/core';\r\nimport { HttpClient, HttpParams } from '@angular/common/http';\r\nimport { throwError, of } from 'rxjs';\r\nimport { switchMap, catchError } from 'rxjs/operators';\r\nimport { AuthSetvice } from './auth..servise';\r\nimport { ErrorsService } from './errors.service';\r\n\r\nexport abstract class BazeService {\r\n  constructor(\r\n    @Inject(HttpClient) private _http: HttpClient,\r\n    @Inject(AuthSetvice) private _auth: AuthSetvice,\r\n    @Inject(ErrorsService) private _errors: ErrorsService\r\n  ) {}\r\n\r\n  protected apiRequest(url: string, params: HttpParams\r\n    ) {\r\n      if (this._auth.isTokenExpiried() && !this._auth.logining) {\r\n        console.info('relogin');\r\n        // this._auth.login();\r\n      }\r\n\r\n      const requestParams = params\r\n        .set('access_token', this._auth.token)\r\n        .set('v', '5.100')\r\n      ;\r\n\r\n      return this._http.jsonp(\r\n        `${url}?${requestParams.toString()}`,\r\n        'callback'\r\n      ).pipe(\r\n        switchMap((response: object) => {\r\n          if ('error' in response) {\r\n            return throwError(response['error']);\r\n          }\r\n\r\n          return of(response);\r\n        }),\r\n        catchError((error) => {\r\n          this._errors.flashError(error);\r\n          return throwError(error);\r\n        })\r\n      );\r\n    }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { BehaviorSubject, Observable } from 'rxjs';\r\nimport { filter, map } from 'rxjs/operators';\r\n\r\nimport { ApiError } from './api-error';\r\n\r\n@Injectable({providedIn: 'root'})\r\nexport class ErrorsService {\r\n  private _error$: BehaviorSubject<ApiError>;\r\n  private _messages = new Map<number, string>();\r\n\r\n  get error$(): Observable<ApiError> {\r\n    return this._error$.pipe(\r\n      filter((error: ApiError) => error !== null),\r\n      map((error: ApiError): ApiError => {\r\n        if (this._messages.has(error.error_code)) {\r\n          error.error_msg = this._messages.get(error.error_code);\r\n        }\r\n        return error;\r\n      })\r\n    );\r\n  }\r\n\r\n  constructor() {\r\n    this._error$ = new  BehaviorSubject<ApiError>(null);\r\n  }\r\n\r\n  addMessages(messages: Array<ApiError>) {\r\n    messages.forEach((message) => {\r\n      this._messages.set(message.error_code, message.error_msg);\r\n    });\r\n  }\r\n\r\n  flashError(error: ApiError) {\r\n    this._error$.next(error);\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { BazeService } from './baze-service';\r\nimport { HttpParams } from '@angular/common/http';\r\nimport { pluck, map } from 'rxjs/operators';\r\nimport { User } from './user';\r\nimport { VkUser } from './vk-user.interface';\r\nimport { VkFrends } from './vk-frends.interface';\r\n\r\n@Injectable({providedIn: 'root'})\r\nexport class FredsService extends BazeService {\r\n  get(userID: number, limit: number = 0, offset: number = 0)/* : Array<User> */ {\r\n    let params = new HttpParams()\r\n      .set('user_id', userID.toString())\r\n      .set('order', 'name')\r\n      .set('fields', 'photo_200_orig')\r\n    ;\r\n\r\n    if (limit > 0) {\r\n      params = params.set('count', limit.toString());\r\n    }\r\n\r\n    if (offset > 0) {\r\n      params = params.set('offset', limit.toString());\r\n    }\r\n\r\n    return this.apiRequest(\r\n      'https://api.vk.com/method/friends.get',\r\n      params\r\n    ).pipe(\r\n      pluck('response'),\r\n      map((frends: VkFrends) => {\r\n        return frends.items.map((frend: VkUser) =>\r\n          new User(\r\n            frend.id,\r\n            frend.first_name,\r\n            frend.last_name,\r\n            frend.photo_200_orig\r\n          )\r\n        );\r\n      })\r\n    );\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { BazeService } from './baze-service';\r\nimport { HttpParams } from '@angular/common/http';\r\nimport { Observable } from 'rxjs';\r\nimport { pluck, map } from 'rxjs/operators';\r\nimport { User } from './user';\r\nimport { VkUser } from './vk-user.interface';\r\n\r\n@Injectable({providedIn: 'root'})\r\nexport class UserService extends BazeService {\r\n  get(id: number): Observable<User> {\r\n    const params = new HttpParams()\r\n      .set('user_ids', id.toString())\r\n      .set('fields', 'photo_200_orig')\r\n    ;\r\n\r\n    return this.apiRequest(\r\n      'https://api.vk.com/method/users.get',\r\n      params\r\n    ).pipe(\r\n      pluck('response'),\r\n      map((result: Array<VkUser>) => {\r\n        const user = result.shift();\r\n        return new User(\r\n          user.id,\r\n          user.first_name,\r\n          user.last_name\r\n        );\r\n      })\r\n    );\r\n  }\r\n}\r\n","export class User {\r\n  constructor(\r\n    public id: number,\r\n    public firstName: string,\r\n    public lastName: string,\r\n    public photo: string = ''\r\n  ) {}\r\n}\r\n","import {\r\n  NgModule,\r\n  InjectionToken,\r\n  ModuleWithProviders,\r\n  Optional,\r\n  Inject\r\n} from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\n\r\nimport { AuthSetvice } from './auth..servise';\r\nimport { TokenStore } from './token-store.interface';\r\nimport { VkApiConfig } from './vk-api-config';\r\n\r\nimport { ErrorsService } from './errors.service';\r\nimport { ApiError } from './api-error';\r\n\r\n\r\nexport const TOKEN_STORE = new InjectionToken<TokenStore>('TOKEN_STORE');\r\nexport const TOKEN_STORE_KEY = new InjectionToken<string>('TOKEN_STORE');\r\nexport const VK_API_CONFIG = new InjectionToken<TokenStore>('VK_API_CONFIG');\r\nexport const ERROR_MESSAGES_CONFIG = new InjectionToken<Array<ApiError>>('ERROR_MESSAGES_CONFIG');\r\n\r\n\r\nconst AuthSetviceFactory = (\r\n  store: TokenStore,\r\n  config: VkApiConfig,\r\n  tokenKeyInStore: string,\r\n  errors: ErrorsService,\r\n  http: HttpClient\r\n): AuthSetvice => {\r\n  const service = new AuthSetvice(http, store, tokenKeyInStore, config, errors);\r\n  service.loadToken();\r\n\r\n  return service;\r\n};\r\n\r\nconst defultErrorMesageConf: Array<ApiError> = [];\r\n\r\n@NgModule({\r\n  providers: [\r\n    {\r\n      provide: AuthSetvice,\r\n      useFactory: AuthSetviceFactory,\r\n      deps: [ TOKEN_STORE, VK_API_CONFIG, TOKEN_STORE_KEY, ErrorsService, HttpClient ]\r\n    },\r\n  ]\r\n})\r\nexport class VkModule {\r\n  static forRoot(\r\n    config: VkApiConfig,\r\n    tokenKeyInStore: string,\r\n    tokenStore: TokenStore\r\n  ): ModuleWithProviders {\r\n    return {\r\n      ngModule: VkModule,\r\n      providers: [\r\n        { provide: TOKEN_STORE_KEY, useValue: tokenKeyInStore },\r\n        { provide: TOKEN_STORE, useValue: tokenStore },\r\n        { provide: VK_API_CONFIG, useValue: config },\r\n        { provide: ERROR_MESSAGES_CONFIG, useValue: defultErrorMesageConf, multi: true },\r\n      ]\r\n    };\r\n  }\r\n\r\n  constructor (\r\n    errors: ErrorsService,\r\n    @Optional() @Inject(ERROR_MESSAGES_CONFIG) configs: Array<Array<ApiError>> = []\r\n  ) {\r\n    if (!configs) {\r\n      return;\r\n    }\r\n\r\n    configs.forEach(config => errors.addMessages(config));\r\n  }\r\n}\r\n","// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n  production: false,\n  vkTokenKeyInStore: 'vK-token-info1',\n  appID: \t7042453,\n  serviceToken: '9ca091d89ca091d89ca091d82d9ccbe44d99ca09ca091d8c1bcf66aac5a450bad627a87',\n  display: 'page',\n  // redirect_uri: 'http://localhost:4200/test',\n  scope: ['friends', 'secure'],\n  response_type: 'token',\n  apiVersion: '5.95',\n  state: '123456'\n};\n\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n *\n * This import should be commented out in production mode because it will have a negative impact\n * on performance if an error is thrown.\n */\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.error(err));\n"],"sourceRoot":""}